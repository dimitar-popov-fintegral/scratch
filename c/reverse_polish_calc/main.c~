#include <stdio.h>
#include <stdlib.h>
#include "calc.h"

#define MAXOP 100

int main(void){

  double temp;
  int type;
  char stack[MAXOP];

  while((type = getop(stack)) != EOF){
    switch(type){
      case NUMBER:
	push(atof(stack));
	break;
      case '+':
	push(pop() + pop());
	break;
      case '*':
	push(pop() * pop());
	break;
      case '-':
	push(-pop() + pop());
	break;
      case '/':
	temp = pop();
	if(temp != 0.0)
	  push((pop() / temp));
	else{
	  printf("zero-divisor not allowed \n");
	  printf("discarding [%f] \n", pop());
	}
	break;
      case '\n':
	printf("this line is pop'd [%.8g] \n", pop());
	break;
      default:
	printf("error: unknown command [%s] \n", stack);
    }
  }

  return 0;

}
